
\documentclass{beamer}
\usetheme{PaloAlto} %was Warsaw, Singapore, PaloAlto, Ilmenau, Boadilla
% see http://www.pletscher.org/writings/latex/beamerthemes.php
\usepackage{verbatim} %for comments
\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage{amsmath}
\usepackage{mathrsfs}
\usepackage{epsfig}
\usepackage{epic}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{latexsym}
\usepackage{multirow}
%\usepackage{algorithm}


\AtBeginSection[]
{
  \begin{frame}<beamer>
    \frametitle{Volume and Integration}
    \tableofcontents[currentsection,currentsubsection]
  \end{frame}
}


\begin{document}

\title{Latte Valuations: Volume and Integration}
\author{}
\date{\today}

\frame{\titlepage}

\section{Volume}




\frame{
\frametitle{Two Flavors}
Latte can compute normalized volumes of polytopes using two different methods:
\begin{enumerate}
\pause
\item The Triangulation Method: Triangulate the polytope into simplices, then use the determinant to find the volume of each simplex.
\pause
\item The Lawrence Method: Triangulate every vertex tangent-cone into simplicial cones and then use a volume formula by Jim Lawrence.
\end{enumerate}
}%frame

\subsection{Triangulation Algorithm}

\frame{
\frametitle{Volume of a square}
\begin{center}
\resizebox{1.5in}{!}{\includegraphics[]{img/unitSquare.png}}
\end{center}
Take the unit square centred at $(1/2, 1/2)$ above; after triangulation, we have two triangles: $\left\lbrace   (0, 0), (1, 0), (1, 1)\right\rbrace$ and $\left\lbrace  (0, 0), (0, 1), (1, 1)\right\rbrace$. Summing the determinant of tiangles' rays and dividing by two give the volume as 1.
}%frame


\frame{
\frametitle{Volume of a square}
\begin{center}
\resizebox{1.5in}{!}{\includegraphics[]{img/unitSquare.png}}
\end{center}
In general, if $\left\lbrace (v_{0i}, v_{1i}, \ldots, v_{di})\right\rbrace  = T_i$ forms a d-simplex such that
the family $\left\lbrace T_1, \ldots, T_k \right\rbrace = \mathcal{T}$ is a triangulation of a d-Polytope, then the volume is given by:

$$
\sum_{T_i \in \mathcal{T}} |\det ( v_{1i} - v_{0i}, \ldots, v_{di} - v_{0i})| / d!
$$
}%frame

\subsection{Triangulation Example}
\frame{
\frametitle{Volume of a square}
For the first step in latte, we need create a file containing he hyperplanes that define the polytope. If $P = \left\lbrace x : Ax < b \right\rbrace$ for some $m \times n$ matrix $A$, then the input file will have the form:

$$
\begin{array}{l l}
 m & n + 1 \\
 \multicolumn{2}{l}{0 \leq b_{i} - a_{i}} \\

\end{array}
$$

where $b_{i}$ is the $i^{th}$ entry of b and $a_i$ is the $i^{th}$ row of $A$.
}%frame


\frame{
\frametitle{Volume of a square}
For our square, its defining hyperplanes are 
$$0 \leq x \leq 1, 0 \leq y \leq 1$$
and so we create a file that contains

\begin{block}<+->{square.latte}
	\begin{tabular}{rrr}
	4 &3 & \\
	0 &1 &0 \\
	1 &-1 &0 \\
	0 &0 &1 \\
	1 &0 &-1 \\
	\end{tabular}
\end{block}

}%frame



\frame{
\frametitle{Volume of a square}
Finally, the command we need is 

\begin{block}<+->{Command:}
./ValuationComputation  --valuation=volume --triangulate square.latte
\end{block}

\begin{block}<+->{Output:}
Volume (using the triangulation-determinant method) \\*
Answer: 1 (as a fraction) \\*
Decimal: 1 \\*
Time: 0.00 sec
\end{block}

}%frame

\subsection{Lawrence Algorithm}


\frame{
\frametitle{Volume of a Square}

Take the same unit square the Lawrence formula gives the volume in terms of the vertices and rays of every tangent cone. If the tangent cones are not simplicial, they must be first triangulated. For our square, the simplicial tangent cones are:

\begin{center}
\begin{tabular}{|c|c|}
	\hline
	Vertex & Rays \\
	\hline
	(0, 0) & (1, 0), (0, 1) \\
	(1, 0) & (-1, 0), (1, 0) \\
	(0, 1) & (0, -1), (-1, 0) \\
	(1, 1) & (-1, 0), (0, -1) \\
	\hline
\end{tabular}
\end{center}
}%frame


\frame{
\frametitle{Lawrence}
Let $v$ be a vertex of a d-polytope's vertex set $V$, and $\mathcal{T}_v = \left\lbrace T_{v_1}, \ldots, T_{v_i} \right\rbrace $ be a triangulation of the tangent cone at $v$. That is, each $T_{v_i} = \left\lbrace r_{1,v_i}, \ldots, r_{d,v_i} \right\rbrace $ is a set of d rays oriented from vertex $v$ to its adjacient vertices. Then the volume is given by 

$$
\sum_{v \in V} \sum_{T_{v_i} \in \mathcal{T}_v } \dfrac{\left\langle v, c\right\rangle ^d |\det{(r_{1, v_i}, \ldots, r_{d, v_i})|}} {\prod_{k = 1}^{k = d} \left\langle -r_{k, v_i}, c \right\rangle  }
$$

where $c$ is any random vector such that you do not divide by zero!
}%frame

\frame{
\frametitle{Volume of a square}
To use the Lawrence method on the square example:

\begin{block}<+->{Command:}
./ValuationComputation  --valuation=volume --lawrence square.latte
\end{block}

\begin{block}<+->{Output:}
Volume (using the Lawrence method) \\*
Answer: 1 (as a fraction) \\*
Decimal: 1 \\*
Time: 0.00 sec
\end{block}
}%frame



\frame{
\frametitle{Data Structures}
The data structure used by LattE to store the monomials and powers of linear forms is a burst trie, which is a 
fancy prefix tree.   Standard trees use pointers (references to memory locations) to point to other points of 
the tree, each path culminating in an entire record of what is stored in the tree.  Prefix trees differ by 
forgetting whatever was used to traverse the tree up to that point.  As an example, say that we are looking for 
the word serendipitously.  If we had traversed four levels down the trie, we would have stored sere as the prefix, 
meaning from our current position in the tree we could reach any words beginning with sere, such as serene.  
For a more detailed explanation either look up burst trie on google or contact the people who implemented it for 
LattE.
}%frame

\section{Integration}

\frame{
\frametitle{Algorithm 1 / 2}
\begin{itemize}
\item BACKGROUND MATH 1: \int_\Delta l^m \d m' = d!vol(\Delta, \d m')\frac{m!}{(m+d)!}
                            \Big(\sum_{i=1}^{d+1}
                                  \frac{ <l, s_i >^{M+d}}
                                       {\prod_{j\neq i} <l, s_i- s_j >}
                            \Big),
                            
 Where $\Delta$ is a regular integer-vertex simplex, d is the dimension, l is a linear form, $s_i$ are the verties.

\item BACKGROUND MATH 2:
  \int_{\Delta} l^m  \d m' = 
  d!vol(\Delta, \d m') \frac{m!}{(m+d)!}
                             \sum_{k\in K} Res_{z=0}
                                  \frac{(z + <l, s_k>)^{m+d}}
                                       {\z^{m_k} {\prod_{i\in K, i \neq k} {(z + <l, s_k - s_i> )}^{m_i}} }
 
 as above and if the simplex is not regular, and where $K\subseteq\{1,\dots,d+1\}$ is an index set of the different poles
 $t= 1/\langle \l ,s_k\rangle$, and for $k\in K$ let $m_k$ denote the order of the pole, i.e.,
   $m_k$ = size of the set ${ i \in \{1,\dots,d+1\} : <l ,s_i> = <l ,s_k> }$. 
\end{itemize}
}%frame	

\frame{
\frametitle{Algorithm 2 / 2}
Now the problem is that this powerful formula uses linear forms.  Luckily for us, there is a closed formula to break down any normal polynomial into a sum of linear forms. 
For any monomial $x_1^{M_1}x_2^{M_2}...x_n^{M_n}$, we can break it into the following sum of powers of linear forms:
$\frac{1}{|M|!}\sum(-1^{|M|-(p_1+...+p_n)}\binom{M_1}{p_1}...\binom{M_n}{p_n}(p_1x_1 + ... + p_nx_n)^{|M|}$
where $|M| = \sum_{1\leq i\leq n}M_i$

By applying this formula to each monomial in the polynomial, we get the linear sums which we then use to integrate over the current simplex.
}%frame

\frame{
\frametitle{Examples}
}%frame


\end{document}
